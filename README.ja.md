# Modu-Arena - Claude Code ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰

![Next.js](https://img.shields.io/badge/Next.js-16.1-black?style=flat-square&logo=next.js)
![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue?style=flat-square&logo=typescript)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-Docker-336791?style=flat-square&logo=postgresql)
![Auth](https://img.shields.io/badge/Auth-Custom_JWT-orange?style=flat-square)
![License](https://img.shields.io/badge/License-Copyleft-green?style=flat-square)

Claude Code ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ã‚’è¿½è·¡ã™ã‚‹ç«¶äº‰å‹ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚AI ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’è¿½è·¡ã—ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¨ç«¶ã„ã€Agentic Coding Analytics ã‚’é€šã˜ã¦ç‹¬è‡ªã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç™ºè¦‹ã—ã¾ã—ã‚‡ã†ã€‚

[English](README.md) | [í•œêµ­ì–´](README.ko.md) | [æ—¥æœ¬èª](README.ja.md) | [ä¸­æ–‡](README.zh.md)

> **âš ï¸ é‡è¦ãªãŠçŸ¥ã‚‰ã› (2025-01-25)**
>
> æœ¬ç•ªç’°å¢ƒã®ç§»è¡Œã«ã‚ˆã‚Šã€**æ—¢å­˜ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒã™ã¹ã¦ãƒªã‚»ãƒƒãƒˆ**ã•ã‚Œã¾ã—ãŸã€‚ä»¥å‰ã«ç™»éŒ²ã•ã‚ŒãŸæ–¹ã¯ã€[arena.modu.ai](https://arena.modu.ai)ã§**å†åº¦ä¼šå“¡ç™»éŒ²**ã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚ã”ä¸ä¾¿ã‚’ãŠã‹ã‘ã—ã¦ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚

---

## ğŸ“š ã¿ã‚“ãªã® AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¬›åº§

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ **Modu-Arena ã®å®Ÿéš›ã®æ´»ç”¨ã‚’ç¤ºã™è¬›åº§ç”¨ä¾‹**ã¨ã—ã¦ä½œæˆã•ã‚Œã¾ã—ãŸã€‚

### ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›®çš„

**ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®æ–°ãŸãªæ¬¡å…ƒã‚’ä½“é¨“ã—ã¦ãã ã•ã„ï¼**

Modu-Arena ã¯ä»¥ä¸‹ã®å­¦ç¿’ç›®çš„ã§ä½œã‚‰ã‚Œã¾ã—ãŸï¼š

- **å®Ÿæˆ¦ AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: 20äººã®å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå”åŠ›ã—ã¦æ§‹ç¯‰ã—ãŸå®Œå…¨ãªã‚·ã‚¹ãƒ†ãƒ 
- **SPEC-First TDD ã®å®Ÿç¾**: ä»•æ§˜æ›¸ã‹ã‚‰ãƒ†ã‚¹ãƒˆã¾ã§å®Œç’§ãªå“è³ªãƒ—ãƒ­ã‚»ã‚¹
- **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ã€ãƒ‡ãƒ¼ã‚¿ä¿æŒãƒãƒªã‚·ãƒ¼ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãŒé©ç”¨ã•ã‚ŒãŸå®Ÿå‹™ç”¨ã‚³ãƒ¼ãƒ‰
- **ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹è²¢çŒ®**: ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã‚’å…¬é–‹ã—ã¦ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å­¦ç¿’ã«è²¢çŒ®

### âš ï¸ é–‹ç™ºç’°å¢ƒ

**48æ™‚é–“ãƒãƒƒã‚­ãƒ³ã‚°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ 48 æ™‚é–“ã§ Modu-Arena ã‚’ä½¿ã£ã¦é›†ä¸­çš„ã«ä½œã‚‰ã‚Œã¾ã—ãŸã€‚å®Ÿæˆ¦ç’°å¢ƒã§ã®è¿…é€Ÿãªé–‹ç™ºã‚’ç¤ºã™å®Ÿè¨¼ä¾‹ã§ã™ã€‚

**é–‹ç™ºç‰¹å¾´**:

- Modu-Arena ã® `/modu` çµ±åˆè‡ªå¾‹è‡ªå‹•åŒ–ã‚³ãƒãƒ³ãƒ‰ã§æ ¸å¿ƒæ©Ÿèƒ½ã‚’å®Ÿè£…
- GLM 4.7 ã¨ Claude Opus ã‚’ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã§æ´»ç”¨ã—ãŸã‚³ã‚¹ãƒˆåŠ¹ç‡ã®è‰¯ã„é–‹ç™º
- Worktree ä¸¦åˆ—é–‹ç™ºã§ç‹¬ç«‹ã—ãŸæ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åŒæ™‚ã«é–‹ç™º

**ãƒ†ã‚¹ãƒˆä¸è¶³ã®ãŠçŸ¥ã‚‰ã›**:

- 48 æ™‚é–“ã®é–‹ç™ºã®ãŸã‚ã€ååˆ†ãªãƒ†ã‚¹ãƒˆãŒè¡Œã‚ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
- ã‚¨ãƒ©ãƒ¼ã‚„æ”¹å–„ç‚¹ãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã¯ã€[GitHub Issues](https://github.com/modu-ai/modu-arena/issues) ã«æ®‹ã—ã¦ãã ã•ã„
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®è²¢çŒ®ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚ˆã‚Šå …ç‰¢ã«ã—ã¾ã™

### ğŸ”— é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

- **[Modu-Arena](https://github.com/modulabs/modu-arena)**: AI é–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

---

## ğŸš€ å§‹ã‚ã‚‹å‰ã«: Modu-Arena ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Modu-Arena ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ã¾ãš **Modu-Arena** ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### Modu-Arena ã¨ã¯ï¼Ÿ

Modu-Arena ã¯ **é«˜å“è³ªãªã‚³ãƒ¼ãƒ‰ã‚’ä½œã‚‹ AI é–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**ã§ã™ã€‚

- **SPEC-First TDD**: æ˜ç¢ºãªä»•æ§˜æ›¸ã§ 90% ã®ä½œã‚Šç›´ã—ã‚’å‰Šæ¸›
- **AI ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: 20 äººã®å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ + 48 å€‹ã®ã‚¹ã‚­ãƒ«
- **å¤šè¨€èªã‚µãƒãƒ¼ãƒˆ**: éŸ“å›½èª/è‹±èª/æ—¥æœ¬èª/ä¸­å›½èªã®è‡ªå‹•ã‚µãƒãƒ¼ãƒˆ
- **Worktree ä¸¦åˆ—é–‹ç™º**: å®Œå…¨ã«åˆ†é›¢ã•ã‚ŒãŸç’°å¢ƒã§ç„¡åˆ¶é™ã®ä¸¦åˆ—ä½œæ¥­
- **Modu-Arena**: ãƒã‚¤ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ã§ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³

### ã‚¯ã‚¤ãƒƒã‚¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# æ–¹æ³• 1: ã‚¯ã‚¤ãƒƒã‚¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰
curl -LsSf https://modu-ai.github.io/modu-arena/install.sh | sh

# æ–¹æ³• 2: æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# ã‚¹ãƒ†ãƒƒãƒ— 1: uv ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆmacOS/Linuxï¼‰
curl -LsSf https://astral.sh/uv/install.sh | sh

# ã‚¹ãƒ†ãƒƒãƒ— 2: Modu-Arena ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
uv tool install modu-arena
```

---

## ğŸ® Modu-Arena CLI ã‚³ãƒãƒ³ãƒ‰

Modu-Arena ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã¨ã€Modu-Arena CLI ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

### ã‚³ãƒãƒ³ãƒ‰æ¦‚è¦

```bash
modu arena [OPTIONS] COMMAND [ARGS]...

Modu-Arena - Claude Code ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰

Claude Code ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’è¿½è·¡ã—ã€ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ã§ç«¶ã„ã¾ã—ã‚‡ã†ã€‚
ã‚¦ã‚§ãƒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰: https://arena.modu.ai

ã‚ªãƒ—ã‚·ãƒ§ãƒ³:
  --help    ãƒ˜ãƒ«ãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º

ã‚³ãƒãƒ³ãƒ‰:
  login      GitHub OAuth ã§ Modu-Arena ã«ãƒ­ã‚°ã‚¤ãƒ³ (ã‚¨ã‚¤ãƒªã‚¢ã‚¹: register)
  status     ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯ã¨çµ±è¨ˆã‚’è¡¨ç¤º
  exclude    ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³è¿½è·¡ã‹ã‚‰é™¤å¤–
  include    ä»¥å‰é™¤å¤–ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å†åŒ…å«
  logout     ä¿å­˜ã•ã‚ŒãŸ Modu-Arena èªè¨¼æƒ…å ±ã‚’å‰Šé™¤
```

### ã‚³ãƒãƒ³ãƒ‰è©³ç´°èª¬æ˜

#### 1. login - GitHub OAuth ãƒ­ã‚°ã‚¤ãƒ³

```bash
modu arena login
```

> **æ³¨è¨˜**: `modu arena register` ã¯ä¸‹ä½äº’æ›æ€§ã®ãŸã‚ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã—ã¦å¼•ãç¶šãã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚

**å‹•ä½œåŸç†**:

1. ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ã„ã¦ GitHub OAuth èªè¨¼ã‚’å®Ÿè¡Œ
2. èªè¨¼æˆåŠŸå¾Œã« API ã‚­ãƒ¼ã‚’è‡ªå‹•ç”Ÿæˆãƒ»ä¿å­˜
3. ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ•ãƒƒã‚¯ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚»ãƒƒã‚·ãƒ§ãƒ³è‡ªå‹•è¿½è·¡ã‚’é–‹å§‹
4. `~/.modu/rank/credentials.json` ã«å®‰å…¨ã« API ã‚­ãƒ¼ã‚’ä¿å­˜

**å®Ÿè¡Œä¾‹**:

```bash
â¯ modu arena login

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Login â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Modu-Arena Login                                                      â”‚
â”‚                                                                      â”‚
â”‚ This will open your browser to authorize with GitHub.                â”‚
â”‚ After authorization, your API key will be stored securely.           â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Opening browser for GitHub authorization...
Waiting for authorization (timeout: 5 minutes)...

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Login Complete â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Successfully logged in as your-github-id                             â”‚
â”‚                                                                      â”‚
â”‚ API Key: modu_arena_a9011fac_c...                                     â”‚
â”‚ Stored in: ~/.modu/rank/credentials.json                             â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Global Hook Installed â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Session tracking hook installed globally.                            â”‚
â”‚                                                                      â”‚
â”‚ Your Claude Code sessions will be automatically tracked.             â”‚
â”‚ Hook location: ~/.claude/hooks/modu/session_end__rank_submit.py      â”‚
â”‚                                                                      â”‚
â”‚ To exclude specific projects:                                        â”‚
â”‚   modu arena exclude /path/to/project                                 â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

#### 2. sync - ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã®åŒæœŸ

```bash
modu arena sync
```

ãƒ­ãƒ¼ã‚«ãƒ«ã®Claude Codeã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’Modu-Arenaã‚µãƒ¼ãƒãƒ¼ã«åŒæœŸã—ã¾ã™ã€‚

**å‡ºåŠ›ä¾‹:**

```bash
â¯ modu arena sync

Syncing 2577 session(s) to Modu-Arena
Phase 1: Parsing transcripts (parallel: 20 workers)

Parsing transcripts â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% (2577/2577)

Phase 2: Submitting 1873 session(s) (batch mode)
Batch size: 100 | Batches: 19

Submitting batches â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% (19/19)

Sync Complete
âœ“ Submitted: 0
â—‹ Skipped:   704 (no usage or duplicate)
âœ— Failed:    500
```

#### 3. status - ãƒã‚¤ãƒ©ãƒ³ã‚¯ç¢ºèª

```bash
modu arena status
```

**å‹•ä½œåŸç†**:

- ä¿å­˜ã•ã‚ŒãŸ API ã‚­ãƒ¼ã§ `/api/v1/rank` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—
- ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥ãƒ©ãƒ³ã‚¯ã‚­ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
- æ—¥æ¬¡/é€±æ¬¡/æœˆæ¬¡/å…¨æœŸé–“ã®ãƒ©ãƒ³ã‚¯ã¨çµ±è¨ˆã‚’è¡¨ç¤º

**å®Ÿè¡Œä¾‹**:

```bash
â¯ modu arena status

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Modu-Arena â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ your-github-id                                                       â”‚
â”‚                                                                      â”‚
â”‚ ğŸ† Global Rank: #42                                                  â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€ Daily â”€â”€â”€â”€â”€â”€â•®  â•­â”€â”€â”€â”€â”€ Weekly â”€â”€â”€â”€â”€â•®  â•­â”€â”€â”€â”€ Monthly â”€â”€â”€â”€â”€â•®  â•­â”€â”€â”€â”€ All Time â”€â”€â”€â”€â•®
â”‚ #12              â”‚  â”‚ #28              â”‚  â”‚ #42              â”‚  â”‚ #156             â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Token Usage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ 1,247,832 total tokens                                               â”‚
â”‚                                                                      â”‚
â”‚ Input  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 847,291 (68%)                            â”‚
â”‚ Output â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 400,541 (32%)                            â”‚
â”‚                                                                      â”‚
â”‚ Sessions: 47                                                         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â— Hook: Installed  |  https://arena.modu.ai
```

#### 4. exclude/include - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†

```bash
# ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é™¤å¤–
modu arena exclude

# ç‰¹å®šã®ãƒ‘ã‚¹ã‚’é™¤å¤–
modu arena exclude /path/to/private

# ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³
modu arena exclude "*/confidential/*"

# é™¤å¤–ãƒªã‚¹ãƒˆã‚’ç¢ºèª
modu arena list-excluded

# å†åŒ…å«
modu arena include /path/to/project
```

**ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·**:

- æ©Ÿå¯†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯è¿½è·¡ã‹ã‚‰é™¤å¤–ã§ãã¾ã™
- é™¤å¤–ã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã¯ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã•ã‚Œã¾ã›ã‚“

#### 5. logout - ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ

```bash
modu arena logout
```

- ä¿å­˜ã•ã‚ŒãŸ API ã‚­ãƒ¼ã‚’å‰Šé™¤
- ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ•ãƒƒã‚¯ã‚’å‰Šé™¤
- ã™ã¹ã¦ã®è¿½è·¡ã‚’åœæ­¢

---

## ğŸ“Š åé›†ã•ã‚Œã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹           | èª¬æ˜                                  | åé›† |
| -------------------- | ------------------------------------- | ---- |
| **ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡**   | å…¥åŠ›/å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ | O    |
| **ãƒ„ãƒ¼ãƒ«ä½¿ç”¨**       | Readã€Editã€Bash ä½¿ç”¨å›æ•°             | O    |
| **ãƒ¢ãƒ‡ãƒ«ä½¿ç”¨**       | Opusã€Sonnetã€Haiku å†…è¨³              | O    |
| **ã‚³ãƒ¼ãƒ‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹** | è¿½åŠ /å‰Šé™¤è¡Œã€å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«             | O    |
| **ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±**   | ç¶™ç¶šæ™‚é–“ã€ã‚¿ãƒ¼ãƒ³æ•°ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—    | O    |
| **ã‚³ãƒ¼ãƒ‰å†…å®¹**       | å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰å†…å®¹                      | X    |
| **ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**     | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹          | X    |
| **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**       | Claude ã¨ã®ä¼šè©±å†…å®¹                   | X    |

**ä¿è¨¼**: åé›†ãƒ‡ãƒ¼ã‚¿ã«ã¯ **æ•°å€¤ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ã¿**ãŒå«ã¾ã‚Œã€ã‚³ãƒ¼ãƒ‰å†…å®¹ã‚„ä¼šè©±è©³ç´°ã¯é€ä¿¡ã•ã‚Œã¾ã›ã‚“ã€‚

---

## ç›®æ¬¡

- [æ©Ÿèƒ½](#æ©Ÿèƒ½)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
- [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
- [å§‹ã‚æ–¹](#å§‹ã‚æ–¹)
- [ç’°å¢ƒå¤‰æ•°](#ç’°å¢ƒå¤‰æ•°)
- [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ)
- [API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](#api-ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹)
- [é–‹ç™º](#é–‹ç™º)
- [ãƒ‡ãƒ—ãƒ­ã‚¤](#ãƒ‡ãƒ—ãƒ­ã‚¤)
- [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)
- [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£)

## æ©Ÿèƒ½

### ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 

- **ãƒãƒ«ãƒæœŸé–“ãƒ©ãƒ³ã‚­ãƒ³ã‚°**: æ—¥æ¬¡ã€é€±æ¬¡ã€æœˆæ¬¡ã€å…¨æœŸé–“ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰
- **è¤‡åˆã‚¹ã‚³ã‚¢è¨ˆç®—**: è¤‡æ•°ã®è¦ç´ ã‚’è€ƒæ…®ã—ãŸé‡ã¿ä»˜ãã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
  - ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ (40%): ç·å…¥åŠ› + å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³
  - åŠ¹ç‡æ€§ (25%): å‡ºåŠ›/å…¥åŠ›æ¯”ç‡ã®æœ€é©åŒ–
  - ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•° (20%): ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°
  - é€£ç¶šè¨˜éŒ² (15%): é€£ç¶šæ´»å‹•æ—¥æ•°

### Vibe Coding Analytics

AI åˆ†æã‚’é€šã˜ã¦ç‹¬è‡ªã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç™ºè¦‹ã—ã¾ã—ã‚‡ã†ï¼š

- **æ¢æ¤œå®¶ (Explorer)**: ã‚³ãƒ¼ãƒ‰æ¢ç´¢ã¨ã‚·ã‚¹ãƒ†ãƒ ç†è§£ã«é›†ä¸­
- **å‰µä½œè€… (Creator)**: æ–°ã—ã„æ©Ÿèƒ½ã¨ã‚³ãƒ¼ãƒ‰ã®ä½œæˆã«é›†ä¸­
- **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒ©ãƒ¼ (Refactorer)**: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®æ”¹å–„ã«å„ªã‚Œã¦ã„ã¾ã™
- **è‡ªå‹•åŒ–æ‹…å½“ (Automator)**: ã‚¿ã‚¹ã‚¯è‡ªå‹•åŒ–ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼èª¿æ•´

### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ©Ÿèƒ½

- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡è¿½è·¡
- ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ— (GitHub ã‚¹ã‚¿ã‚¤ãƒ«)
- ãƒ¢ãƒ‡ãƒ«ä½¿ç”¨é‡åˆ†æ
- æ™‚é–“åˆ¥ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ‘ã‚¿ãƒ¼ãƒ³
- é€±æ¬¡ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³
- ãƒ„ãƒ¼ãƒ«ä½¿ç”¨çµ±è¨ˆ
- åŒ¿åå‚åŠ ã®ãŸã‚ã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰

### å¤šè¨€èªã‚µãƒãƒ¼ãƒˆ

4 ã¤ã®è¨€èªã‚’å®Œå…¨ã‚µãƒãƒ¼ãƒˆï¼š

- è‹±èª (en)
- éŸ“å›½èª (ko)
- æ—¥æœ¬èª (ja)
- ä¸­å›½èª (zh)

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
apps/web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ [locale]/         # å¤šè¨€èªãƒ«ãƒ¼ãƒˆ (next-intl)
â”‚   â”‚   â”‚   â”œâ”€â”€ api/          # API ãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ v1/       # å…¬é–‹ CLI API (v1)
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sessions/ # ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ²
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ rank/     # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ status/   # API ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ verify/   # API ã‚­ãƒ¼æ¤œè¨¼
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ me/       # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ API
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ leaderboard/ # å…¬é–‹ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cron/     # ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¿ã‚¹ã‚¯
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ calculate-rankings/ # ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¨ˆç®—
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ cleanup-data/       # ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth/     # CLI èªè¨¼
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â””â”€â”€ users/        # å…¬é–‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ layout.tsx        # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â””â”€â”€ globals.css       # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”œâ”€â”€ cache/                 # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”‚   â”‚   â”œâ”€â”€ config.ts         # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ TTL è¨­å®š
â”‚   â”‚   â””â”€â”€ keys.ts           # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼
â”‚   â”œâ”€â”€ components/            # React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ui/               # ãƒ™ãƒ¼ã‚¹ UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ layout/           # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ leaderboard/      # ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ dashboard/        # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ profile/          # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ db/                    # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”‚   â”‚   â”œâ”€â”€ schema.ts         # Drizzle ORM ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”‚   â”œâ”€â”€ index.ts          # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
â”‚   â”‚   â”œâ”€â”€ rls.ts            # Row-level ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
â”‚   â”‚   â””â”€â”€ seed.ts           # ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ lib/                   # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â”‚   â”œâ”€â”€ auth.ts           # API ã‚­ãƒ¼ & HMAC èªè¨¼
â”‚   â”‚   â”œâ”€â”€ audit.ts          # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ãƒ­ã‚°
â”‚   â”‚   â”œâ”€â”€ cache.ts          # Redis ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ rate-limiter.ts   # ãƒ¬ãƒ¼ãƒˆåˆ¶é™
â”‚   â”‚   â”œâ”€â”€ score.ts          # ã‚¹ã‚³ã‚¢è¨ˆç®—
â”‚   â”‚   â””â”€â”€ api-response.ts   # ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚   â””â”€â”€ i18n/                  # å›½éš›åŒ–
â”œâ”€â”€ messages/                   # ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ drizzle/                   # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
```

### ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

![ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](docs/system-architecture.png)

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒªãƒ¼     | æŠ€è¡“              | ç›®çš„                              |
| -------------- | ----------------- | --------------------------------- |
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | Next.js 16        | ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ React ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| è¨€èª           | TypeScript 5      | å‹å®‰å…¨ãªé–‹ç™º                      |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹   | PostgreSQL        | Docker ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹       |
| ORM            | Drizzle ORM       | å‹å®‰å…¨ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒª        |
| èªè¨¼           | Custom JWT        | ãƒ¡ãƒ¼ãƒ« OTP ç™»éŒ² + ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ­ã‚°ã‚¤ãƒ³ |
| ãƒ—ãƒ­ã‚­ã‚·       | Caddy             | HTTPS ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·            |
| ãƒ—ãƒ­ã‚»ã‚¹       | PM2               | Node.js ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼      |
| ãƒ¡ãƒ¼ãƒ«         | Gmail REST API    | OTP èªè¨¼ãƒ¡ãƒ¼ãƒ«                    |
| UI             | Tailwind CSS 4    | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°                      |
| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | Radix UI          | ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ UI ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–  |
| ãƒãƒ£ãƒ¼ãƒˆ       | Recharts          | ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–                      |
| i18n           | next-intl         | å›½éš›åŒ–                            |
| æ¤œè¨¼           | Zod               | ãƒ©ãƒ³ã‚¿ã‚¤ãƒ å‹æ¤œè¨¼                  |

## å§‹ã‚æ–¹

### å‰ææ¡ä»¶

- **Node.js** 20.x ä»¥ä¸Š
- **Bun** 1.xï¼ˆæ¨å¥¨ï¼‰ã¾ãŸã¯ npm/yarn
- **PostgreSQL**ï¼ˆDocker ã‚³ãƒ³ãƒ†ãƒŠã¾ãŸã¯ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ï¼‰
- æœ¬ç•ªç’°å¢ƒç”¨ **Caddy** HTTPS ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·
- æœ¬ç•ªç’°å¢ƒç”¨ **PM2** Node.js ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

1. **ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³**

```bash
git clone https://github.com/your-org/modu-arena.git
cd modu-arena/apps/web
```

2. **ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```bash
bun install
```

3. **ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š**

```bash
cp .env.example .env.local
# .env.local ã‚’é–‹ã„ã¦èªè¨¼æƒ…å ±ã‚’å…¥åŠ›
```

4. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’è¨­å®š**

```bash
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”Ÿæˆ
bun run db:generate

# ã‚¹ã‚­ãƒ¼ãƒã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ—ãƒƒã‚·ãƒ¥
bun run db:push

# ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚·ãƒ¼ãƒ‰
bun run db:seed
```

5. **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•**

```bash
bun run dev
```

[http://localhost:3000](http://localhost:3000) ã‚’é–‹ã„ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

## ç’°å¢ƒå¤‰æ•°

### å¿…é ˆå¤‰æ•°

| å¤‰æ•°                                | èª¬æ˜                   | ä¾‹                                               |
| ----------------------------------- | ---------------------- | ------------------------------------------------ |
| `DATABASE_URL`                      | PostgreSQL æ¥ç¶šæ–‡å­—åˆ—   | `postgresql://user:pass@localhost:5432/dbname`    |
| `JWT_SECRET`                        | JWT ç½²åã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ    | `your-secure-random-string`                       |

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³å¤‰æ•°

| å¤‰æ•°                | èª¬æ˜                                         | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ                 |
| ------------------- | -------------------------------------------- | -------------------------- |
| `GMAIL_CLIENT_ID`      | Gmail OAuth2 ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ID         | OTP ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã«å¿…é ˆ       |
| `GMAIL_CLIENT_SECRET`  | Gmail OAuth2 ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ | OTP ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã«å¿…é ˆ       |
| `GMAIL_REFRESH_TOKEN`  | Gmail OAuth2 ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³     | OTP ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã«å¿…é ˆ       |
| `GMAIL_USER`           | Gmail é€ä¿¡å…ƒãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹            | OTP ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã«å¿…é ˆ       |
| `CRON_SECRET`          | Cron ã‚¸ãƒ§ãƒ–èªè¨¼ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ           | æœ¬ç•ªç’°å¢ƒã§å¿…é ˆ             |

### .env.local ä¾‹

```env
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆå¿…é ˆï¼‰
DATABASE_URL="postgresql://modu:password@localhost:5432/modu_rank"

# JWT èªè¨¼ï¼ˆå¿…é ˆï¼‰
JWT_SECRET="your-secure-random-string"

# Gmail OAuth2ï¼ˆãƒ¡ãƒ¼ãƒ« OTP ã«å¿…é ˆï¼‰
GMAIL_CLIENT_ID="your-client-id"
GMAIL_CLIENT_SECRET="your-client-secret"
GMAIL_REFRESH_TOKEN="your-refresh-token"
GMAIL_USER="your-email@gmail.com"

# Cron èªè¨¼ï¼ˆæœ¬ç•ªç’°å¢ƒã§å¿…é ˆï¼‰
CRON_SECRET="your-secure-random-string"
```

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–¢ä¿‚å›³

```mermaid
erDiagram
    users ||--o{ sessions : has
    users ||--o{ token_usage : has
    users ||--o{ daily_user_stats : has
    users ||--o{ rankings : has
    users ||--o{ project_evaluations : has
    users ||--o| user_stats : has
    users ||--o{ security_audit_log : logs
    users ||--o{ email_verifications : verifies
    tool_types ||--o{ sessions : identifies
    tool_types ||--o{ token_usage : identifies
    sessions ||--o{ token_usage : has

    users {
        uuid id PK
        varchar username UK
        varchar password_hash
        varchar github_id UK
        varchar github_username
        text github_avatar_url
        varchar display_name
        varchar email
        varchar api_key_hash
        varchar api_key_prefix
        varchar user_salt
        boolean privacy_mode
        integer successful_projects_count
        timestamp created_at
        timestamp updated_at
    }

    email_verifications {
        uuid id PK
        varchar email
        varchar code
        timestamp expires_at
        boolean used
        timestamp created_at
    }

    tool_types {
        varchar id PK
        varchar name
        varchar display_name
        text icon_url
        varchar color
        boolean is_active
        integer sort_order
        timestamp created_at
    }

    sessions {
        uuid id PK
        uuid user_id FK
        varchar tool_type_id FK
        varchar session_hash UK
        varchar anonymous_project_id
        timestamp started_at
        timestamp ended_at
        integer duration_seconds
        varchar model_name
        integer turn_count
        jsonb tool_usage
        jsonb code_metrics
        timestamp created_at
    }

    token_usage {
        uuid id PK
        uuid session_id FK
        uuid user_id FK
        varchar tool_type_id FK
        bigint input_tokens
        bigint output_tokens
        bigint cache_creation_tokens
        bigint cache_read_tokens
        timestamp recorded_at
    }

    project_evaluations {
        uuid id PK
        uuid user_id FK
        varchar project_path_hash
        varchar project_name
        integer local_score
        integer backend_score
        integer penalty_score
        integer final_score
        integer cumulative_score_after
        varchar llm_model
        varchar llm_provider
        boolean passed
        text feedback
        timestamp evaluated_at
    }

    user_stats {
        uuid user_id PK_FK
        bigint total_input_tokens
        bigint total_output_tokens
        bigint total_cache_tokens
        bigint total_all_tokens
        jsonb tokens_by_tool
        integer total_sessions
        jsonb sessions_by_tool
        integer successful_projects_count
        integer total_evaluations
        timestamp last_activity_at
        timestamp updated_at
    }

    daily_user_stats {
        uuid id PK
        uuid user_id FK
        date stat_date
        bigint input_tokens
        bigint output_tokens
        bigint cache_tokens
        bigint total_tokens
        integer session_count
        jsonb by_tool
        timestamp created_at
    }

    rankings {
        uuid id PK
        uuid user_id FK
        varchar period_type
        date period_start
        integer rank_position
        bigint total_tokens
        decimal composite_score
        integer session_count
        decimal efficiency_score
        timestamp updated_at
    }

    security_audit_log {
        uuid id PK
        uuid user_id FK
        varchar event_type
        varchar ip_address
        text user_agent
        jsonb details
        timestamp created_at
    }
```

### ãƒ†ãƒ¼ãƒ–ãƒ«æ¦‚è¦

| ãƒ†ãƒ¼ãƒ–ãƒ«             | èª¬æ˜                                               |
| -------------------- | -------------------------------------------------- |
| `users`              | ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ãƒ™ãƒ¼ã‚¹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ    |
| `email_verifications`| ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—æ™‚ã®ãƒ¡ãƒ¼ãƒ«èªè¨¼ç”¨OTPã‚³ãƒ¼ãƒ‰              |
| `tool_types`         | å¯¾å¿œã™ã‚‹AIã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã®ãƒ¬ã‚¸ã‚¹ãƒˆãƒª           |
| `sessions`           | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€AIã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ² |
| `token_usage`        | ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¥ã®è©³ç´°ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»é‡                   |
| `project_evaluations`| LLMãƒ™ãƒ¼ã‚¹ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©•ä¾¡çµæœ                    |
| `user_stats`         | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”¨ã®é›†è¨ˆãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆ                 |
| `daily_user_stats`   | å±¥æ­´ãƒãƒ£ãƒ¼ãƒˆç”¨ã®æ—¥æ¬¡é›†è¨ˆ                           |
| `rankings`           | å„æœŸé–“åˆ¥ã®è¨ˆç®—ã•ã‚ŒãŸãƒ©ãƒ³ã‚¯                         |
| `security_audit_log` | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆç›£æŸ»ãƒˆãƒ¬ã‚¤ãƒ«                   |

## API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### API v1 (CLI çµ±åˆ)

ãƒ™ãƒ¼ã‚¹ URL: `/api/v1`

#### API ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯

```http
GET /api/v1/status
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:

```json
{
  "status": "operational",
  "version": "1.0.0",
  "timestamp": "2025-01-11T00:00:00.000Z",
  "endpoints": {
    "sessions": "/api/v1/sessions",
    "rank": "/api/v1/rank",
    "status": "/api/v1/status"
  }
}
```

#### API ã‚­ãƒ¼æ¤œè¨¼

```http
GET /api/v1/verify
X-API-Key: modu_arena_xxxxxxxx_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:

```json
{
  "valid": true,
  "username": "developer",
  "apiKeyPrefix": "modu_arena_xxxxxxxx",
  "privacyMode": false,
  "createdAt": "2025-01-01T00:00:00.000Z"
}
```

#### ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ²

```http
POST /api/v1/sessions
Content-Type: application/json
X-API-Key: modu_arena_xxxxxxxx_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
X-Timestamp: 1704067200
X-Signature: <HMAC-SHA256 ç½²å>
```

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£:

```json
{
  "sessionHash": "<64æ–‡å­—ãƒãƒƒã‚·ãƒ¥>",
  "endedAt": "2025-01-11T12:00:00.000Z",
  "inputTokens": 50000,
  "outputTokens": 10000,
  "cacheCreationTokens": 5000,
  "cacheReadTokens": 20000,
  "modelName": "claude-sonnet-4-20250514",
  "anonymousProjectId": "proj_abc123"
}
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:

```json
{
  "success": true,
  "sessionId": "uuid",
  "message": "Session recorded successfully"
}
```

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç…§ä¼š

```http
GET /api/v1/rank
X-API-Key: modu_arena_xxxxxxxx_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:

```json
{
  "username": "developer",
  "rankings": {
    "daily": {
      "position": 5,
      "compositeScore": 450.25,
      "totalParticipants": 100
    },
    "weekly": {
      "position": 12,
      "compositeScore": 380.5,
      "totalParticipants": 250
    },
    "monthly": null,
    "allTime": {
      "position": 8,
      "compositeScore": 520.75,
      "totalParticipants": 500
    }
  },
  "stats": {
    "totalTokens": 1500000,
    "totalSessions": 45,
    "inputTokens": 1200000,
    "outputTokens": 300000
  },
  "lastUpdated": "2025-01-11T00:00:00.000Z"
}
```

### å…¬é–‹ API

#### ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ç…§ä¼š

```http
GET /api/leaderboard?period=weekly&limit=50&offset=0
```

ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
| ---------- | ------ | ---------- | ----------------------------------------- |
| `period` | string | `weekly` | `daily`, `weekly`, `monthly`, `all_time` |
| `limit` | number | `50` | ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®çµæœæ•° (1-100) |
| `offset` | number | `0` | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚ªãƒ•ã‚»ãƒƒãƒˆ |

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:

```json
{
  "data": [
    {
      "rank": 1,
      "userId": "uuid",
      "username": "top_coder",
      "avatarUrl": "https://...",
      "totalTokens": 5000000,
      "compositeScore": 850.5,
      "sessionCount": 120,
      "efficiencyScore": 0.85,
      "isPrivate": false
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 50,
    "total": 500,
    "totalPages": 10,
    "hasMore": true
  }
}
```

### èªè¨¼ãƒ˜ãƒƒãƒ€ãƒ¼

| ãƒ˜ãƒƒãƒ€ãƒ¼      | èª¬æ˜                      | å¿…é ˆ        |
| ------------- | ------------------------- | ----------- |
| `X-API-Key`   | èªè¨¼ç”¨ API ã‚­ãƒ¼           | ã¯ã„        |
| `X-Timestamp` | Unix ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆç§’ï¼‰ | POST ã®å ´åˆ |
| `X-Signature` | HMAC-SHA256 ç½²å          | POST ã®å ´åˆ |

### HMAC ç½²åè¨ˆç®—

```
message = timestamp + ":" + request_body
signature = HMAC-SHA256(api_key, message)
```

ç½²åæ¤œè¨¼æ¡ä»¶:

- æœ€å¤§ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æœ‰åŠ¹æœŸé–“: 5 åˆ†
- ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ”»æ’ƒé˜²æ­¢ã®ãŸã‚ã®å®šæ•°æ™‚é–“æ¯”è¼ƒ

## é–‹ç™º

### åˆ©ç”¨å¯èƒ½ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
# é–‹ç™º
bun run dev          # Turbopack ã§é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

# ãƒ“ãƒ«ãƒ‰
bun run build        # æœ¬ç•ªãƒ“ãƒ«ãƒ‰
bun run start        # æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼èµ·å‹•

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
bun run db:generate  # Drizzle ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ
bun run db:migrate   # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
bun run db:push      # ã‚¹ã‚­ãƒ¼ãƒç›´æ¥ãƒ—ãƒƒã‚·ãƒ¥
bun run db:studio    # Drizzle Studio GUI ã‚’é–‹ã
bun run db:seed      # ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒ‰

# å“è³ª
bun run lint         # Biome ãƒªãƒ³ã‚¿ãƒ¼å®Ÿè¡Œ
bun run lint:fix     # ãƒªãƒ³ãƒˆå•é¡Œä¿®æ­£
bun run format       # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
bun run type-check   # TypeScript å‹ãƒã‚§ãƒƒã‚¯
```

### ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ **Biome** ã‚’ä½¿ã£ã¦ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è¡Œã„ã¾ã™ï¼š

```bash
# ã‚¤ã‚·ãƒ¥ãƒ¼ç¢ºèª
bun run lint

# è‡ªå‹•ä¿®æ­£
bun run lint:fix

# ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
bun run format
```

### ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ

1. **curl ã§ API ãƒ†ã‚¹ãƒˆ**

```bash
# API ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯
curl http://localhost:3000/api/v1/status

# API ã‚­ãƒ¼æ¤œè¨¼
curl -H "X-API-Key: your_api_key" http://localhost:3000/api/v1/verify
```

2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¸ã‚ª**

```bash
bun run db:studio
```

[https://local.drizzle.studio](https://local.drizzle.studio) ã§ Drizzle Studio ãŒé–‹ãã¾ã™ã€‚

## ãƒ‡ãƒ—ãƒ­ã‚¤

### æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤

1. **ã‚µãƒ¼ãƒãƒ¼ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
   - Docker ã‚³ãƒ³ãƒ†ãƒŠã§ PostgreSQL ã‚’å®Ÿè¡Œ
   - Caddy ã‚’ HTTPS ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ã¨ã—ã¦æ§‹æˆ
   - PM2 ã§ Node.js ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç®¡ç†

2. **SCP çµŒç”±ã§ãƒ‡ãƒ—ãƒ­ã‚¤**

   ```bash
   # ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚µãƒ¼ãƒãƒ¼ã«ã‚³ãƒ”ãƒ¼
   scp -r apps/web/ user@server:/path/to/modu-arena/apps/web/

   # ã‚µãƒ¼ãƒãƒ¼ã§: ãƒ“ãƒ«ãƒ‰ã—ã¦å†èµ·å‹•
   cd /path/to/modu-arena/apps/web
   npx next build
   pm2 restart modu-arena-web
   ```

3. **Cron ã‚¸ãƒ§ãƒ–**

   crontab ã¾ãŸã¯ PM2 cron ã§è‡ªå‹•åŒ–ã‚¿ã‚¹ã‚¯ã‚’æ§‹æˆã—ã¾ã™ï¼š

   - **ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¨ˆç®—**: æ¯æ—¥ UTC æ·±å¤œ â€” `GET /api/cron/calculate-rankings`
   - **ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: æ¯æ—¥ UTC åˆå‰ 2 æ™‚ â€” `GET /api/cron/cleanup-data`

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### èªè¨¼

- **ã‚¦ã‚§ãƒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: Custom JWTï¼ˆãƒ¡ãƒ¼ãƒ« OTP ç™»éŒ² + ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ­ã‚°ã‚¤ãƒ³ï¼‰
- **CLI API**: API ã‚­ãƒ¼ + HMAC-SHA256 ç½²å

### API ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½

| æ©Ÿèƒ½               | å®Ÿè£…                               |
| ------------------ | ---------------------------------- |
| API ã‚­ãƒ¼ãƒãƒƒã‚·ãƒ¥   | SHA-256ï¼ˆãƒãƒƒã‚·ãƒ¥ã®ã¿ä¿å­˜ï¼‰        |
| ãƒªã‚¯ã‚¨ã‚¹ãƒˆç½²å     | ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ã HMAC-SHA256     |
| ãƒ¬ãƒ¼ãƒˆåˆ¶é™         | 100 req/minï¼ˆRedis ãƒ™ãƒ¼ã‚¹åˆ†æ•£ï¼‰    |
| ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ”»æ’ƒé˜²æ­¢ | å®šæ•°æ™‚é–“æ¯”è¼ƒ                       |
| ãƒªãƒ—ãƒ¬ã‚¤æ”»æ’ƒé˜²æ­¢   | 5 åˆ†ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—è¨±å®¹ç¯„å›²         |
| ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•´åˆæ€§   | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼         |
| ç•°å¸¸æ¤œçŸ¥           | å¹³å‡ 10 å€ãƒˆãƒ¼ã‚¯ãƒ³ã—ãã„å€¤ãƒ•ãƒ©ã‚°   |
| ç›£æŸ»ãƒ­ã‚°           | ã™ã¹ã¦ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨˜éŒ² |

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚¿ã‚¤ãƒ— | åˆ¶é™    | ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ |
| -------------------- | ------- | ---------- |
| ä¸€èˆ¬ API             | 100 req | 1 åˆ†       |
| èªè¨¼                 | 10 req  | 1 åˆ†       |
| æ©Ÿå¯†æ“ä½œ             | 30 req  | 1 åˆ†       |
| å…¬é–‹èª­ã¿å–ã‚Š         | 200 req | 1 åˆ†       |

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—

ç›£æŸ»ãƒ­ã‚°ãŒè¿½è·¡ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆï¼š

- `api_key_generated` / `api_key_regenerated` / `api_key_revoked`
- `api_key_validated` / `api_key_invalid`
- `hmac_signature_invalid` / `hmac_timestamp_expired`
- `rate_limit_exceeded`
- `session_created` / `session_duplicate`
- `suspicious_activity`
- `privacy_mode_changed`

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ã§ API å¿œç­”æ™‚é–“ã‚’æœ€é©åŒ–ã—ã¾ã™ã€‚

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ TTL è¨­å®š

| ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—         | TTL        | èª¬æ˜                     |
| -------------------- | ---------- | ------------------------ |
| æ—¥æ¬¡ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰   | 23 æ™‚é–“    | æ¬¡å›ã®ãƒ©ãƒ³ã‚¯è¨ˆç®—ã¾ã§æœ‰åŠ¹ |
| é€±æ¬¡ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰   | 6 æ—¥ 23 æ™‚ | æ¬¡å›ã®ãƒ©ãƒ³ã‚¯è¨ˆç®—ã¾ã§æœ‰åŠ¹ |
| æœˆæ¬¡ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰   | 29 æ—¥      | æ¬¡å›ã®ãƒ©ãƒ³ã‚¯è¨ˆç®—ã¾ã§æœ‰åŠ¹ |
| å…¨æœŸé–“ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ | 6 æ—¥ 23 æ™‚ | é€±æ¬¡ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ã¨åŒæœŸ |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ©ãƒ³ã‚¯       | 1 æ™‚é–“     | å€‹åˆ¥ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿       |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆ         | 30 åˆ†      | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”¨è©³ç´°çµ±è¨ˆ |
| ã‚°ãƒ­ãƒ¼ãƒãƒ«çµ±è¨ˆ       | 15 åˆ†      | ã‚°ãƒ­ãƒ¼ãƒãƒ«é›†ç´„ãƒ‡ãƒ¼ã‚¿     |

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–

ãƒ©ãƒ³ã‚¯è¨ˆç®— Cron ã‚¸ãƒ§ãƒ–å®Œäº†å¾Œã«è‡ªå‹•çš„ã«é–¢é€£ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–ã—ã¾ã™ï¼š

```typescript
// ãƒ©ãƒ³ã‚¯è¨ˆç®—å¾Œã«å®Ÿè¡Œ
await delPattern(`modu-arena:leaderboard:daily:*`);
await delPattern(`modu-arena:leaderboard:weekly:*`);
await delPattern(`modu-arena:leaderboard:monthly:*`);
await delPattern(`modu-arena:leaderboard:all_time:*`);
```

#### Graceful Degradation

Redis æ¥ç¶šå¤±æ•—æ™‚ã«ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ã‚’ãƒã‚¤ãƒ‘ã‚¹ã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ç›´æ¥ãƒ‡ãƒ¼ã‚¿ã‚’ç…§ä¼šã—ã¦ã‚µãƒ¼ãƒ“ã‚¹ä¸­æ–­ã‚’é˜²ãã¾ã™ã€‚

### ãƒ‡ãƒ¼ã‚¿ä¿æŒãƒãƒªã‚·ãƒ¼

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µã‚¤ã‚ºã‚’ç®¡ç†ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã®è‡ªå‹•ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒãƒªã‚·ãƒ¼ã§ã™ã€‚

#### ä¿æŒæœŸé–“

| ãƒ†ãƒ¼ãƒ–ãƒ«           | ä¿æŒæœŸé–“ | ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å¯¾è±¡        |
| ------------------ | -------- | ------------------------- |
| `token_usage`      | 90 æ—¥    | 90 æ—¥ä»¥å‰ã®è¨˜éŒ²           |
| `daily_aggregates` | 90 æ—¥    | 90 æ—¥ä»¥å‰ã®é›†ç´„ãƒ‡ãƒ¼ã‚¿     |
| `rankings` (æ—¥æ¬¡)  | 30 æ—¥    | 30 æ—¥ä»¥å‰ã®æ—¥æ¬¡ãƒ©ãƒ³ã‚¯     |
| `sessions`         | 90 æ—¥    | 90 æ—¥ä»¥å‰ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ² |

#### ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

- **å®Ÿè¡Œæ™‚åˆ»**: æ¯æ—¥åˆå‰ 2 æ™‚ï¼ˆUTCï¼‰
- **ãƒãƒƒãƒå‡¦ç†**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è² è·ã‚’åˆ†æ•£ã™ã‚‹ãŸã‚ã« 100 ä»¶å˜ä½ã§å‡¦ç†
- **ãƒ­ã‚°è¨˜éŒ²**: å‰Šé™¤ã•ã‚ŒãŸãƒ¬ã‚³ãƒ¼ãƒ‰æ•°ã¨å®Ÿè¡Œæ™‚é–“ã‚’ãƒ­ã‚°ã«è¨˜éŒ²

#### ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒ­ã‚¸ãƒƒã‚¯ä¾‹

```typescript
// 90 æ—¥ä»¥å‰ã® token_usage ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
while (true) {
  const idsToDelete = await pooledDb
    .select({ id: tokenUsage.id })
    .from(tokenUsage)
    .where(lt(tokenUsage.recordedAt, cutoffDate))
    .limit(100);

  if (idsToDelete.length === 0) break;

  for (const row of idsToDelete) {
    await pooledDb.delete(tokenUsage).where(eq(tokenUsage.id, row.id));
  }
}
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–

#### ãƒãƒƒãƒå‡¦ç†

å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥/æ›´æ–°æ™‚ã«ãƒãƒƒãƒå‡¦ç†ã‚’ä½¿ç”¨ã—ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€é©åŒ–ã—ã¾ã™ï¼š

- **ãƒãƒƒãƒã‚µã‚¤ã‚º**: 100 ä»¶
- **é©ç”¨å¯¾è±¡**: ãƒ©ãƒ³ã‚¯æ›´æ–°ã€æ—¥æ¬¡é›†ç´„æ›´æ–°
- **ORM æœ€é©åŒ–**: PostgreSQL `INSERT ... ON CONFLICT` ã‚’æ´»ç”¨

#### æ¥ç¶šãƒ—ãƒ¼ãƒªãƒ³ã‚°

Drizzle ORM ã‚’ä½¿ç”¨ã—ã¦ PostgreSQL æ¥ç¶šãƒ—ãƒ¼ãƒªãƒ³ã‚°ã‚’å®Ÿè£…ã—ã¾ã™ï¼š

```typescript
// Database connection with Drizzle ORM
export const db = drizzle(pool, { schema });
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

#### ä¸»è¦ãƒ¡ãƒˆãƒªã‚¯ã‚¹

- API å¿œç­”æ™‚é–“ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ Hit vs Missï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªå®Ÿè¡Œæ™‚é–“
- Cron ã‚¸ãƒ§ãƒ–å®Ÿè¡Œæ™‚é–“ã¨å‡¦ç†ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°
- Redis ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡

#### æœ€é©åŒ–ã®æ©Ÿä¼š

- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ãŒä½ã„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç‰¹å®š
- é…ã„ã‚¯ã‚¨ãƒªã‚’æœ€é©åŒ–
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¿½åŠ ã®æ¤œè¨
- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°æˆ¦ç•¥ã®æ¤œè¨ï¼ˆå¤§è¦æ¨¡ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯æ™‚ï¼‰

## è¤‡åˆã‚¹ã‚³ã‚¢ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

```
Score = (Token * 0.40) + (Efficiency * 0.25) + (Session * 0.20) + (Streak * 0.15)

è¨ˆç®—å¼:
- Token = min(1, log10(totalTokens + 1) / 10)
- Efficiency = min(outputTokens / inputTokens, 2) / 2
- Session = min(1, log10(sessions + 1) / 3)
- Streak = min(streak, 30) / 30

æœ€çµ‚ã‚¹ã‚³ã‚¢ = åŠ é‡å’Œ * 1000
```

### ã‚¹ã‚³ã‚¢ãƒ†ã‚£ã‚¢

| ãƒ†ã‚£ã‚¢       | ã‚¹ã‚³ã‚¢ç¯„å›² |
| ------------ | ---------- |
| ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ | 800+       |
| ãƒ—ãƒ©ãƒãƒŠ     | 600-799    |
| ã‚´ãƒ¼ãƒ«ãƒ‰     | 400-599    |
| ã‚·ãƒ«ãƒãƒ¼     | 200-399    |
| ãƒ–ãƒ­ãƒ³ã‚º     | 0-199      |

## è²¢çŒ®

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ: `git checkout -b feature/amazing-feature`
3. å¤‰æ›´ã‚’è¡Œã†
4. ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°å®Ÿè¡Œ: `bun run lint:fix`
5. ã‚³ãƒŸãƒƒãƒˆ: `git commit -m 'feat: add amazing feature'`
6. ãƒ—ãƒƒã‚·ãƒ¥: `git push origin feature/amazing-feature`
7. Pull Request ã‚’é–‹ã

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ **Copyleft License (COPYLEFT-3.0)** ã®ä¸‹ã§ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã•ã‚Œã¦ã„ã¾ã™ - è©³ç´°ã¯ [LICENSE](../../LICENSE) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=modu-ai/modu-arena&type=date&legend=top-left)](https://www.star-history.com/#modu-ai/modu-arena&type=date&legend=top-left)

---

## ğŸ™ Made with â¤ï¸ by Modu-Arena Team

**Last Updated:** 2026-01-12
**Modu**: Modu ã¯ã€Œã¿ã‚“ãªã®ãŸã‚ã® AI (Modu-ui AI)ã€ã‚’æ„å‘³ã—ã¾ã™ã€‚

> **ã€Œç„¡é™å¯èƒ½ä¸»ç¾© - ã¿ã‚“ãªã® AIã€**
